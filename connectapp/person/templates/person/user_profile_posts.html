{% load static %}

{% for post in posts %}
    <div class="post-item">
        <div class="post-header">
            <img src="{{ post.user.get_avatar_url }}" class="post-avatar" alt="{{ post.user.username }}">

            <!-- Информация о пользователе -->
            <div class="post-info">
                <h3>
                    <a href="{% url 'user_profile' post.user.username %}">
                        {{ post.user.first_name }} {{ post.user.last_name }}
                    </a>
                </h3>
                <p class="post-username">@{{ post.user.username }}</p>
            </div>
            
            <p class="post-date">{{ post.date }}</p>
        </div>
    
        <div class="post-content">
            <div class="post-text" id="post-text-{{ post.id }}">{{ post.text }}</div>
            <div class="fade-out"></div>
            <a class="read-more-btn" id="read-more-btn-{{ post.id }}" style="display: none;">Читать далее</a>
        </div>
        {% if post.image %}
            <div class="post-image-container">
                <img src="{{ post.image.url }}" alt="Прикреплённая картинка">
            </div>
        {% endif %}

        <div class="post-footer">
            <button class="like-btn {% if request.user in post.likes.all %}liked{% endif %}" data-post-id="{{ post_id }}" title="Лайк">
                <i class="fas fa-heart"></i>
            </button>
            <span class="reaction-counter">{{ post.total_likes }}</span>
        
            <a href="{% url 'post_detail' post.id %}">
                <button class="comment-btn" title="Комментировать">
                    <img src="{% static 'person/img/comments.svg' %}" alt="Comment Icon" width="30" height="30">
                </button>
            </a>
            <span class="reaction-counter">{{ post.total_comments }}</span>
            <button class="comment-btn" title="Поделиться" onclick="copyToClipboard({{ post.id }})">
                <img src="{% static 'person/img/share.svg' %}" alt="Share Icon" width="28" height="28">
            </button>
        </div>
    </div>
{% endfor %}
