{% load static %}

{% for post in posts %}
        <div class="post-item">
            <div class="post-header-profile">
                <img src="{{ post.user.get_avatar_url }}" class="post-avatar" alt="{{ post.user.username }}">

                <!-- Информация о пользователе -->
                <div class="post-info">
                    <h3>
                        <a href="{% url 'user_profile' post.user.username %}">
                            {{ post.user.first_name }} {{ post.user.last_name }}
                        </a>
                    </h3>
                    <p class="post-username">@{{ post.user.username }}</p>
                </div>
                
                <p class="post-date">{{ post.date }}</p>
            </div>
            <div class="post-content">
                <p class="post-text" id="post-text-{{ post.id }}">{{ post.text }}</p>
                <div class="fade-out"></div>
                <a class="read-more-btn" id="read-more-btn-{{ post.id }}" style="display: none;">Читать далее</a>
            </div>
            {% if post.image %}
                <div class="post-image-container">
                    <img src="{{ post.image.url }}" alt="Прикреплённая картинка">
                </div>
            {% endif %}

            <div class="post-footer">
                <div class="like-group">
                    <button class="like-btn {% if request.user in post.likes.all %}liked{% endif %}" data-post-id="{{ post_id }}" title="Лайк">
                        <i class="fas fa-heart"></i>
                    </button>
                    <span class="likes-count">{{ post.total_likes }}</span>
                </div>
                <a href="{% url 'post_detail' post.id %}">
                    <button class="comment-btn" title="Комментарий">
                        <img src="{% static 'person/img/comments.svg' %}" alt="Comment Icon" width="30" height="30">
                    </button>
                </a>

            </div>
        </div>
{% endfor %}
